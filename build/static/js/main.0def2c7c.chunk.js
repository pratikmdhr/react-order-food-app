(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[0],[,,function(e,t,a){e.exports={form:"Checkout_form__26gr1",control:"Checkout_control__2qGfb",actions:"Checkout_actions__2X_6_",submit:"Checkout_submit__2BFZZ",invalid:"Checkout_invalid__2gAN9"}},function(e,t,a){e.exports={"cart-items":"Cart_cart-items__2pjQw",total:"Cart_total__3pLin",actions:"Cart_actions__1GOmr","button--alt":"Cart_button--alt__1Z2QQ",button:"Cart_button__fw1-t"}},,function(e,t,a){e.exports={"cart-item":"CartItem_cart-item__1B1_q",summary:"CartItem_summary__3FMDj",price:"CartItem_price__2Nl0j",quantity:"CartItem_quantity__DfEXm",actions:"CartItem_actions__UwVPJ"}},,,function(e,t,a){e.exports={button:"HeaderCartButton_button__3CMOT",icon:"HeaderCartButton_icon__9KWtg",badge:"HeaderCartButton_badge__1Z3gL",bump:"HeaderCartButton_bump__3atD4"}},,,function(e,t,a){e.exports={meal:"MealItem_meal__2uJ70",description:"MealItem_description__2YINS",price:"MealItem_price__3sNYl"}},function(e,t,a){e.exports={meals:"AvailableMeals_meals__2ZLCP","meals-appear":"AvailableMeals_meals-appear__ONwLi",MealsLoading:"AvailableMeals_MealsLoading__UmYIn",MealsError:"AvailableMeals_MealsError__38x-D"}},function(e,t,a){e.exports={header:"Header_header__zSTUo","main-image":"Header_main-image__2Q3So"}},function(e,t,a){e.exports={backdrop:"Modal_backdrop__3iXHD",modal:"Modal_modal__30MRu","slide-down":"Modal_slide-down__294fH"}},,,,function(e,t,a){e.exports=a.p+"static/media/meals.37c4943d.jpg"},function(e,t,a){e.exports={summary:"MealsSummary_summary__22zUX"}},function(e,t,a){e.exports={card:"Card_card__1te4P"}},function(e,t,a){e.exports={input:"Input_input__HkNJD"}},function(e,t,a){e.exports={form:"MealItemForm_form__32qVd"}},function(e,t,a){e.exports=a(30)},,,,,function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),l=a.n(c),o=(a(28),a(1)),i=r.a.createContext({showCart:!1,onShowCart:function(){},onHideCart:function(){},menuItems:[],isLoading:!1,httpErrorMsg:null,clearCart:function(){},cartItems:[],totalAmount:0,addItem:function(e){},removeItem:function(e){}}),u=function(){return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},r.a.createElement("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"}))},m=a(8),s=a.n(m),d=function(e){var t=Object(n.useContext)(i),a=Object(n.useState)(!0),c=Object(o.a)(a,2),l=c[0],m=c[1],d=t.cartItems.reduce((function(e,t){return e+t.displayQuantity}),0),p=t.showCart;Object(n.useEffect)((function(){if(!p){m(!0);var e=setTimeout((function(){m(!1)}),300);return function(){return clearTimeout(e)}}}),[d,p]);var f="".concat(s.a.button," ").concat(l&&s.a.bump);return r.a.createElement("button",{onClick:t.onShowCart,className:f},r.a.createElement("span",{className:s.a.icon},r.a.createElement(u,null)),r.a.createElement("span",null,"Cart"),r.a.createElement("span",{className:s.a.badge},d))},p=a(18),f=a.n(p),E=a(13),_=a.n(E),b=function(e){return r.a.createElement(n.Fragment,null,r.a.createElement("header",{className:_.a.header},r.a.createElement("h1",null,"Delicious Meals"),r.a.createElement(d,null)),r.a.createElement("div",{className:_.a["main-image"]},r.a.createElement("img",{src:f.a,alt:"Delicious food"})))},h=a(19),v=a.n(h),C=function(){return r.a.createElement("section",{className:v.a.summary},r.a.createElement("h2",null,"Delicious Food, Delivered To You"),r.a.createElement("p",null,"Choose your favorite meal from our broad selection of available meals and enjoy a delicious lunch or dinner at home."),r.a.createElement("p",null,"All our meals are cooked with high-quality ingredients, just-in-time and of course by experienced chefs!"))},y=a(20),g=a.n(y),N=function(e){return r.a.createElement("div",{className:g.a.card},e.children)},O=a(21),j=a.n(O),I=r.a.forwardRef((function(e,t){return r.a.createElement("div",{className:j.a.input},r.a.createElement("label",{htmlFor:e.input.id},e.label),r.a.createElement("input",Object.assign({ref:t},e.input)))})),x=a(22),D=a.n(x),k=function(e){var t=Object(n.useState)(!0),a=Object(o.a)(t,2),c=a[0],l=a[1],i=Object(n.useRef)();return r.a.createElement("form",{className:D.a.form,onSubmit:function(t){t.preventDefault();var a=i.current.value,n=+a;0===a.trim().length||n<1||n>5?l(!1):e.onAddToCart(n)}},r.a.createElement(I,{ref:i,label:"Quantity",input:{id:"quantity_"+e.id,type:"number",min:"1",max:"5",step:"1",defaultValue:"1"}}),r.a.createElement("button",null,"+ Add"),!c&&r.a.createElement("p",null,"Please enter a valid number (1-5)"))},S=a(11),M=a.n(S),w=function(e){var t=e.id,a=e.name,c=e.description,l=e.price,o=Object(n.useContext)(i);return r.a.createElement("li",{className:M.a.meal},r.a.createElement("div",null,r.a.createElement("h3",null,a),r.a.createElement("div",{className:M.a.description},c),r.a.createElement("div",{className:M.a.price},"$",l.toFixed(2))),r.a.createElement("div",null,r.a.createElement(k,{id:t,onAddToCart:function(e){o.addItem({id:t,name:a,quantity:e,price:l})}})))},H=a(12),A=a.n(H),T=function(){var e=Object(n.useContext)(i);if(e.isLoading)return r.a.createElement("section",{className:A.a.MealsLoading},r.a.createElement("p",null,"Loading..."),";");if(e.httpErrorMsg)return r.a.createElement("section",{className:A.a.MealsError},r.a.createElement("p",null,e.httpErrorMsg));var t=e.menuItems.map((function(e){return r.a.createElement(w,{key:e.id,id:e.id,name:e.name,description:e.description,price:e.price},e.name)}));return r.a.createElement("section",{className:A.a.meals},r.a.createElement(N,null,r.a.createElement("ul",null,t)))},B=function(){return r.a.createElement(n.Fragment,null,r.a.createElement(C,null),r.a.createElement(T,null))},F=a(4),q=a.n(F),L=a(10),P=a(14),R=a.n(P),Q=function(e){return r.a.createElement("div",{onClick:e.onClick,className:R.a.backdrop})},V=function(e){return r.a.createElement("div",{className:R.a.modal},e.children)},U=document.querySelector("#root-backdrop"),J=document.querySelector("#root-overlay"),z=function(e){return r.a.createElement(n.Fragment,null,l.a.createPortal(r.a.createElement(Q,{onClick:e.onClick}),U),l.a.createPortal(r.a.createElement(V,null,e.children),J))},Y=a(5),Z=a.n(Y),X=function(e){var t="$".concat(e.price.toFixed(2));return r.a.createElement("li",{className:Z.a["cart-item"]},r.a.createElement("div",null,r.a.createElement("h2",null,e.name),r.a.createElement("div",{className:Z.a.summary},r.a.createElement("span",{className:Z.a.price},t),r.a.createElement("span",{className:Z.a.quantity},"x ",e.quantity))),r.a.createElement("div",{className:Z.a.actions},r.a.createElement("button",{onClick:e.onRemove},"\u2212"),r.a.createElement("button",{onClick:e.onAdd},"+")))},$={enteredData:"",isTouched:!1},G=function(e,t){return"INPUT"===t.type?{enteredData:t.value,isTouched:e.isTouched}:"BLUR"===t.type?{enteredData:e.enteredData,isTouched:!0}:"RESET"===t.type?$:{enteredData:"",isTouched:!1}},K=function(e){var t=Object(n.useReducer)(G,$),a=Object(o.a)(t,2),r=a[0],c=a[1],l=e(r.enteredData),i=!l&&r.isTouched;return{enteredData:r.enteredData,enteredDataIsValid:l,hasError:i,inputChangeHandler:function(e){c({type:"INPUT",value:e.target.value})},inputBlurHandler:function(e){c({type:"BLUR"})},inputTouched:function(){c({type:"BLUR"})},reset:function(){c({type:"RESET"})}}},W=a(2),ee=a.n(W),te=function(e){return""!==e.trim()},ae=function(e){return 6===e.trim().length},ne=function(e){var t=K(te),a=t.enteredData,n=t.enteredDataIsValid,c=t.hasError,l=t.inputChangeHandler,o=t.inputBlurHandler,i=t.inputTouched,u=t.reset,m=K(te),s=m.enteredData,d=m.enteredDataIsValid,p=m.hasError,f=m.inputChangeHandler,E=m.inputBlurHandler,_=m.inputTouched,b=m.reset,h=K(ae),v=h.enteredData,C=h.enteredDataIsValid,y=h.hasError,g=h.inputChangeHandler,N=h.inputBlurHandler,O=h.inputTouched,j=h.reset,I=K(te),x=I.enteredData,D=I.enteredDataIsValid,k=I.hasError,S=I.inputChangeHandler,M=I.inputBlurHandler,w=I.inputTouched,H=I.reset,A=!1;n&&d&&C&&D&&(A=!0);var T="".concat(ee.a.control," ").concat(c?ee.a.invalid:""),B="".concat(ee.a.control," ").concat(p?ee.a.invalid:""),F="".concat(ee.a.control," ").concat(y?ee.a.invalid:""),q="".concat(ee.a.control," ").concat(k?ee.a.invalid:"");return r.a.createElement("form",{className:ee.a.form,onSubmit:function(t){t.preventDefault(),i(),_(),O(),w(),A&&(e.onConfirm({name:a,street:s,city:x,postalCode:v}),console.log("form has been submitted"),u(),b(),j(),H())}},r.a.createElement("div",{className:T},r.a.createElement("label",{htmlFor:"name"},"Your Name"),r.a.createElement("input",{type:"text",id:"name",onChange:l,onBlur:o,value:a}),r.a.createElement("p",null,"Please enter a valid name")),r.a.createElement("div",{className:B},r.a.createElement("label",{htmlFor:"street"},"Street"),r.a.createElement("input",{type:"text",id:"street",onChange:f,onBlur:E,value:s}),r.a.createElement("p",null,"Please enter a valid street name")),r.a.createElement("div",{className:F},r.a.createElement("label",{htmlFor:"postal"},"Postal Code"),r.a.createElement("input",{type:"text",id:"postal",onChange:g,onBlur:N,value:v}),r.a.createElement("p",null,"Please enter a valid Postal Code (6 characters long)")),r.a.createElement("div",{className:q},r.a.createElement("label",{htmlFor:"city"},"City"),r.a.createElement("input",{type:"text",id:"city",onChange:S,onBlur:M,value:x}),r.a.createElement("p",null,"Please enter a valid city name")),r.a.createElement("div",{className:ee.a.actions},r.a.createElement("button",{type:"button",onClick:e.onCancel},"Back"),r.a.createElement("button",{className:ee.a.submit},"Confirm")))},re=a(3),ce=a.n(re),le=function(e){var t=Object(n.useContext)(i),a=Object(n.useState)(!1),c=Object(o.a)(a,2),l=c[0],u=c[1],m=Object(n.useState)(!1),s=Object(o.a)(m,2),d=s[0],p=s[1],f=Object(n.useState)(!1),E=Object(o.a)(f,2),_=E[0],b=E[1],h="$".concat(t.totalAmount.toFixed(2)),v=t.cartItems.length>0;if(!1===t.showCart)return null;var C=function(e){t.removeItem(e)},y=function(e){e.quantity=1,t.addItem(e)},g=function(){var e=Object(L.a)(q.a.mark((function e(a){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,fetch("https://food-order-app-4fc86-default-rtdb.firebaseio.com/order.json",{method:"POST",body:JSON.stringify({user:a,orderedItems:t.cartItems})});case 3:p(!1),b(!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=r.a.createElement("ul",{className:ce.a["cart-items"]},t.cartItems.map((function(e){return r.a.createElement(X,{key:e.id,name:e.name,quantity:e.displayQuantity,price:e.price,onRemove:C.bind(null,e.id),onAdd:y.bind(null,e)})}))),O=r.a.createElement("div",{className:ce.a.actions},r.a.createElement("button",{onClick:t.onHideCart,className:ce.a["button--alt"]},"Close"),v&&r.a.createElement("button",{onClick:function(){u(!0)},className:ce.a.button},"Order")),j=r.a.createElement(n.Fragment,null,!l&&N,r.a.createElement("div",{className:ce.a.total},r.a.createElement("span",null,"Total Amount"),r.a.createElement("span",null,h)),l&&r.a.createElement(ne,{onConfirm:g,onCancel:function(){u(!1)}}),!l&&O),I=r.a.createElement("p",null,"Sending order data..."),x=r.a.createElement(n.Fragment,null,r.a.createElement("p",null,"Successfully sent the order!"),r.a.createElement("div",{className:ce.a.actions},r.a.createElement("button",{onClick:function(){b(!1),u(!1),t.clearCart(),t.onHideCart()},className:ce.a.button},"Close")));return r.a.createElement(z,{onClick:t.onHideCart},!d&&!_&&j,d&&I,!d&&_&&x)},oe=function(){return r.a.createElement(n.Fragment,null,r.a.createElement(le,null),r.a.createElement(b,null),r.a.createElement("main",null,r.a.createElement(B,null)))},ie=a(15),ue=a(16),me={items:[],totalAmount:0},se=function(e,t){if("ADD"===t.type){var a,n=e.items.findIndex((function(e){return e.id===t.item.id}));if(-1===n){var r=Object(ue.a)(Object(ue.a)({},t.item),{},{displayQuantity:t.item.quantity});a=e.items.concat(r)}else(a=Object(ie.a)(e.items))[n].displayQuantity+=t.item.quantity;return{items:a,totalAmount:e.totalAmount+t.item.price*t.item.quantity}}if("REMOVE"===t.type){var c,l=e.items.findIndex((function(e){return e.id===t.id})),o=Object(ie.a)(e.items);return o[l].displayQuantity>1?(o[l].displayQuantity--,c=e.totalAmount-o[l].price):(c=e.totalAmount-o[l].price,o.splice(l,1)),{items:o,totalAmount:c}}if("CLEAR"===t.type)return me},de=function(e){var t=JSON.parse(localStorage.getItem("cart-item")),a=t||me,c=Object(n.useReducer)(se,a),l=Object(o.a)(c,2),u=l[0],m=l[1];Object(n.useEffect)((function(){return localStorage.setItem("cart-item",JSON.stringify(u))}),[u]);var s=Object(n.useState)(!1),d=Object(o.a)(s,2),p=d[0],f=d[1],E=Object(n.useState)(!1),_=Object(o.a)(E,2),b=_[0],h=_[1],v=Object(n.useState)(!1),C=Object(o.a)(v,2),y=C[0],g=C[1],N=Object(n.useState)([]),O=Object(o.a)(N,2),j=O[0],I=O[1];Object(n.useEffect)((function(){h(!0),function(){var e=Object(L.a)(q.a.mark((function e(){var t,a,n,r;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://food-order-app-4fc86-default-rtdb.firebaseio.com/menu.json");case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Something went wrong!");case 5:return e.next=7,t.json();case 7:for(r in a=e.sent,n=[],a)n.push({id:r,name:a[r].name,description:a[r].description,price:a[r].price});I(n),h(!1);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()().catch((function(e){h(!1),g(e.message)}))}),[]);var x={showCart:p,onShowCart:function(){f(!0)},onHideCart:function(){f(!1)},menuItems:j,isLoading:b,httpErrorMsg:y,clearCart:function(){m({type:"CLEAR"})},cartItems:u.items,totalAmount:u.totalAmount,addItem:function(e){m({type:"ADD",item:e})},removeItem:function(e){m({type:"REMOVE",id:e})}};return r.a.createElement(i.Provider,{value:x},e.children)};l.a.render(r.a.createElement(de,null,r.a.createElement(oe,null)),document.getElementById("root"))}],[[23,1,2]]]);
//# sourceMappingURL=main.0def2c7c.chunk.js.map